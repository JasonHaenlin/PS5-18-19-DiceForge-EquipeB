package fr.unice.polytech.si3.ps5.teamb.diceforge.game.exploit.card;

import static org.junit.Assert.assertTrue;
import static org.junit.jupiter.api.Assertions.assertEquals;

import java.util.Map;

import org.junit.Before;
import org.junit.Test;

import fr.unice.polytech.si3.ps5.teamb.diceforge.bot.player.OnlyDice;
import fr.unice.polytech.si3.ps5.teamb.diceforge.game.Inventory;
import fr.unice.polytech.si3.ps5.teamb.diceforge.game.Player;
import fr.unice.polytech.si3.ps5.teamb.diceforge.game.Resources;

/**
 * CardTest
 */
public class CardTest {

    Player bot;
    Inventory inv;

    @Before
    public void setup() {
        bot = new OnlyDice();
        inv = new Inventory();
    }

    @Test
    public void cancerTest() {
        Card c = new Cancer(5, 5, 5);
        assertTrue("Cancer".equals(c.toString()));
        c.playImmEffect(bot, inv);
        Map<Resources, Integer> res = c.hasResourcesToStore();
        assertTrue(res.size() != 0);
        res = c.hasResourcesToStore();
        assertTrue(res.size() == 0);
    }

    @Test
    public void ferrymanTest() {
        Card c = new Ferryman(5, 5, 5);
        assertTrue("Ferryman".equals(c.toString()));
        assertEquals(5, c.getVictoryPoints());
        assertEquals(5, c.getMoonStone());
        assertEquals(5, c.getSunStone());
    }

    @Test
    public void gordonTest() {
        Card c = new Gorgon(5, 5, 5);
        assertTrue("Gorgon".equals(c.toString()));
        assertEquals(5, c.getVictoryPoints());
        assertEquals(5, c.getMoonStone());
        assertEquals(5, c.getSunStone());
    }

    @Test
    public void hydreaTest() {
        Card c = new Hydra(5, 5, 5);
        assertTrue("Hydra".equals(c.toString()));
        assertEquals(5, c.getVictoryPoints());
        assertEquals(5, c.getMoonStone());
        assertEquals(5, c.getSunStone());
    }

    @Test
    public void sphynxTest() {
        Card c = new Sphynx(5, 5, 5);
        assertTrue("Sphynx".equals(c.toString()));
        c.playImmEffect(bot, inv);
        Map<Resources, Integer> res = c.hasResourcesToStore();
        assertTrue(res.size() != 0);
        res = c.hasResourcesToStore();
        assertTrue(res.size() == 0);
    }

    @Test
    public void wildSpiritTest() {
        Card c = new WildSpirits(5, 5, 5);
        assertTrue("Wild Spirits".equals(c.toString()));
        c.playImmEffect(bot, inv);
        Map<Resources, Integer> res = c.hasResourcesToStore();
        System.out.println(res);
        assertEquals(3, (int) res.get(Resources.GOLD));
        assertEquals(3, (int) res.get(Resources.VICTORY_POINT));
    }

    @Test
    public void blackSmithHammerTest(){
        Card c = new BlacksmithHammer(1,0,0);
        assertTrue("The Blacksmith's Hammer".equals(c.toString()));
        assertTrue(c.hasAfterEffect(inv));

        assertEquals(0,c.playEffect(10));

        assertEquals(10,c.playEffect(10));

        assertEquals(0,c.playEffect(1));

        assertEquals(15, c.playEffect(10));

        assertEquals(0, c.playEffect(10));
    }

}